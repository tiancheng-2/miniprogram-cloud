<!--pages/map/index.wxml-->
<view class="page-container">

  <!-- 全屏地图 -->
  <map
    id="restaurantMap"
    class="full-map"
    longitude="{{centerLongitude}}"
    latitude="{{centerLatitude}}"
    scale="{{scale}}"
    markers="{{markers}}"
    show-location="{{true}}"
    bindmarkertap="onMarkerTap"
    bindcallouttap="onCalloutTap"
    bindregionchange="onRegionChange"
  ></map>

  <!-- 顶部统计卡片 -->
  <view class="stats-card">
    <view class="stat-item">
      <text class="stat-number">{{restaurants.length}}</text>
      <text class="stat-label">餐厅</text>
    </view>
    <view class="stat-divider"></view>
    <view class="stat-item">
      <text class="stat-number">{{visitedCities}}</text>
      <text class="stat-label">城市</text>
    </view>
  </view>

  <!-- 地图控制按钮 -->
  <view class="map-controls">
    <!-- 放大 -->
    <view class="control-btn" bindtap="onZoomIn">
      <text class="control-icon">+</text>
    </view>

    <!-- 缩小 -->
    <view class="control-btn" bindtap="onZoomOut">
      <text class="control-icon">−</text>
    </view>

    <!-- 定位 -->
    <view class="control-btn" bindtap="onMoveToCurrentLocation">
      <text class="control-icon">⊙</text>
    </view>
  </view>

  <!-- 添加餐厅 FAB -->
  <view class="fab-container">
    <view class="fab-button" bindtap="onNavigateToAdd">
      <text class="fab-icon">+</text>
    </view>
  </view>

  <!-- 加载状态 -->
  <view class="loading-overlay" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">加载中...</text>
  </view>

</view>
